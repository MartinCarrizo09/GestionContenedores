{
	"info": {
		"_postman_id": "transportista-collection",
		"name": "üöõ ROL TRANSPORTISTA - Operacional",
		"description": "Colecci√≥n para el rol TRANSPORTISTA: GET todo, PATCH disponibilidad, iniciar/finalizar, POST/PUT flota (50 endpoints).",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [{"key": "token", "value": "{{authToken}}", "type": "string"}]
	},
	"item": [
		{
			"name": "üîë Autenticaci√≥n",
			"item": [
				{
					"name": "Obtener Token - TRANSPORTISTA",
					"event": [{
						"listen": "test",
						"script": {
							"exec": [
								"if (pm.response.code === 200) {",
								"    var jsonData = pm.response.json();",
								"    var token = jsonData.access_token;",
								"    if (token) {",
								"        pm.environment.set('authToken', token);",
								"        pm.collectionVariables.set('authToken', token);",
								"        console.log('‚úÖ Token TRANSPORTISTA guardado correctamente');",
								"        console.log('   Token: ' + token.substring(0, 30) + '...');",
								"    } else {",
								"        console.log('‚ùå Error: No se recibi√≥ access_token en la respuesta');",
								"    }",
								"} else {",
								"    console.log('‚ùå Error al obtener token. Status: ' + pm.response.code);",
								"}"
							],
							"type": "text/javascript"
						}
					}],
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/x-www-form-urlencoded"}],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{"key": "grant_type", "value": "password"},
								{"key": "client_id", "value": "tpi-client"},
								{"key": "username", "value": "transportista@tpi.com"},
								{"key": "password", "value": "transportista123"}
							]
						},
						"url": "http://localhost:9090/realms/tpi-backend/protocol/openid-connect/token"
					}
				}
			]
		},
		{
			"name": "üë• GESTI√ìN - Clientes",
			"item": [
				{"name": "GET - Listar Todos", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/clientes"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/clientes/1"}}
			]
		},
		{
			"name": "üì¶ GESTI√ìN - Contenedores",
			"item": [
				{"name": "GET - Listar Todos", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/contenedores"}},
				{"name": "GET - Por Cliente", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/contenedores/cliente/1"}},
				{"name": "GET - Por C√≥digo", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/contenedores/codigo/REEF-20-00003"}},
				{"name": "GET - Estado Por C√≥digo", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/contenedores/codigo/REEF-20-00003/estado"}},
				{"name": "GET - Estado Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/contenedores/1/estado"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/contenedores/1"}}
			]
		},
		{
			"name": "üè¢ GESTI√ìN - Dep√≥sitos",
			"item": [
				{"name": "GET - Listar Todos", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/depositos"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/depositos/1"}}
			]
		},
		{
			"name": "üí∞ GESTI√ìN - Tarifas",
			"item": [
				{"name": "GET - Listar Todas", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/tarifas"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/gestion/tarifas/1"}},
				{"name": "GET - Tarifa Aplicable", "request": {"method": "GET", "header": [], "url": {"raw": "http://localhost:8080/api/gestion/tarifas/aplicable?peso=2500&volumen=30", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "gestion", "tarifas", "aplicable"], "query": [{"key": "peso", "value": "2500"}, {"key": "volumen", "value": "30"}]}}}
			]
		},
		{
			"name": "üöö FLOTA - Camiones",
			"item": [
				{"name": "GET - Listar Todos", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/flota/camiones"}},
				{"name": "GET - Disponibles", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/flota/camiones/disponibles"}},
				{"name": "GET - Por Patente", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/flota/camiones/ABC123"}},
				{"name": "GET - Aptos por Carga", "request": {"method": "GET", "header": [], "url": {"raw": "http://localhost:8080/api/flota/camiones/aptos?peso=3000&volumen=25", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "flota", "camiones", "aptos"], "query": [{"key": "peso", "value": "3000"}, {"key": "volumen", "value": "25"}]}}},
				{"name": "POST - Crear", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n    \"patente\": \"ZZZ999\",\n    \"nombreTransportista\": \"Transportes Nuevos\",\n    \"telefonoTransportista\": \"+54 351 7777777\",\n    \"capacidadPeso\": 5000.0,\n    \"capacidadVolumen\": 35.0,\n    \"consumoCombustibleKm\": 0.30,\n    \"costoKm\": 120.0,\n    \"disponible\": true\n}"}, "url": "http://localhost:8080/api/flota/camiones"}},
				{"name": "PUT - Actualizar", "request": {"method": "PUT", "header": [{"key": "Content-Type", "value": "application/json"}], "body": {"mode": "raw", "raw": "{\n    \"nombreTransportista\": \"Transportes Actualizados\",\n    \"telefonoTransportista\": \"+54 351 7777777\",\n    \"capacidadPeso\": 5500.0,\n    \"capacidadVolumen\": 38.0,\n    \"consumoCombustibleKm\": 0.32,\n    \"costoKm\": 125.0,\n    \"disponible\": true\n}"}, "url": "http://localhost:8080/api/flota/camiones/ZZZ999"}},
				{"name": "PATCH - Cambiar Disponibilidad ‚úÖ", "request": {"method": "PATCH", "header": [], "url": {"raw": "http://localhost:8080/api/flota/camiones/ABC123/disponibilidad?disponible=false", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "flota", "camiones", "ABC123", "disponibilidad"], "query": [{"key": "disponible", "value": "false"}]}}}
			]
		},
		{
			"name": "üìã LOG√çSTICA - Solicitudes",
			"item": [
				{"name": "GET - Listar Todas", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/solicitudes"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/solicitudes/1"}},
				{"name": "GET - Por Seguimiento", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/solicitudes/seguimiento/TRACK-2025-001"}},
				{"name": "GET - Por Cliente", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/solicitudes/cliente/1"}},
				{"name": "GET - Por Estado", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/solicitudes/estado/PENDIENTE"}},
				{"name": "GET - Seguimiento Detallado", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/solicitudes/seguimiento-detallado/TRACK-2025-001"}}
			]
		},
		{
			"name": "üõ£Ô∏è LOG√çSTICA - Rutas",
			"item": [
				{"name": "GET - Listar Todas", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/rutas"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/rutas/1"}},
				{"name": "GET - Por Solicitud", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/rutas/solicitud/1"}}
			]
		},
		{
			"name": "üö¶ LOG√çSTICA - Tramos",
			"item": [
				{"name": "GET - Listar Todos", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/tramos"}},
				{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/tramos/2"}},
				{"name": "GET - Por Ruta", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/tramos/ruta/1"}},
				{"name": "GET - Por Cami√≥n ‚úÖ", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/tramos/camion/ABC123"}},
				{"name": "GET - Por Estado", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/tramos/estado/ESTIMADO"}},
				{"name": "PATCH - Iniciar ‚úÖ", "request": {"method": "PATCH", "header": [], "url": "http://localhost:8080/api/logistica/tramos/2/iniciar"}},
				{"name": "PATCH - Finalizar ‚úÖ", "request": {"method": "PATCH", "header": [], "url": {"raw": "http://localhost:8080/api/logistica/tramos/2/finalizar?kmReales=715.5&costoKmCamion=120&consumoCamion=0.3", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "logistica", "tramos", "2", "finalizar"], "query": [{"key": "kmReales", "value": "715.5"}, {"key": "costoKmCamion", "value": "120"}, {"key": "consumoCamion", "value": "0.3"}]}}}
			]
		},
		{
			"name": "‚öôÔ∏è LOG√çSTICA - Configuraci√≥n",
			"item": [
			{"name": "GET - Listar Todas", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/configuraciones"}},
			{"name": "GET - Por ID", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/configuraciones/1"}},
			{"name": "GET - Por Clave", "request": {"method": "GET", "header": [], "url": "http://localhost:8080/api/logistica/configuraciones/clave/velocidad_promedio_camion"}}
			]
		},
		{
			"name": "üó∫Ô∏è LOG√çSTICA - Google Maps",
			"item": [
				{"name": "GET - Distancia por Direcciones", "request": {"method": "GET", "header": [], "url": {"raw": "http://localhost:8080/api/logistica/google-maps/distancia?origen=C√≥rdoba, Argentina&destino=Buenos Aires, Argentina", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "logistica", "google-maps", "distancia"], "query": [{"key": "origen", "value": "C√≥rdoba, Argentina"}, {"key": "destino", "value": "Buenos Aires, Argentina"}]}}},
				{"name": "GET - Distancia por Coordenadas", "request": {"method": "GET", "header": [], "url": {"raw": "http://localhost:8080/api/logistica/google-maps/distancia-coords?lat1=-31.4201&lng1=-64.1888&lat2=-34.6037&lng2=-58.3816", "protocol": "http", "host": ["localhost"], "port": "8080", "path": ["api", "logistica", "google-maps", "distancia-coords"], "query": [{"key": "lat1", "value": "-31.4201"}, {"key": "lng1", "value": "-64.1888"}, {"key": "lat2", "value": "-34.6037"}, {"key": "lng2", "value": "-58.3816"}]}}}
			]
		}
	],
	"variable": [{"key": "authToken", "value": "", "type": "string"}]
}
